# Kickstart file automatically generated by anaconda.

#version=DEVEL
install
url --url=http://inara.cs.umbc.edu/cblr/links/rhel6w-x86_64
lang en_US.UTF-8
keyboard us
network --onboot yes --device eth0 --mtu=1500 --bootproto dhcp
rootpw  --iscrypted $1$Iw5mN4HE$ISl5XaZ.cy7ZJs6SITx/70
# Reboot after installation
reboot
firewall --service=ssh
authconfig --enableshadow --enablemd5 --enablefingerprint
selinux --disabled
timezone --utc America/New_York
bootloader --location=mbr --driveorder=sda --append="crashkernel=auto rhgb rhgb quiet quiet"
# The following is the partition information you requested
# Note that any partitions you deleted are not expressed
# here so unless you clear all partitions first, this is
# not guaranteed to work
#clearpart --none --drives=sda

#part / --fstype=ext4 --onpart=sda1
#part  --onpart=sda3 --noformat
#part swap --onpart=sda4 --noformat


repo --name="prod-adobe"  --baseurl=http://inara.cs.umbc.edu/cobbler/repo_mirror/prod-adobe --cost=1000
repo --name="prod-cfengine"  --baseurl=http://inara.cs.umbc.edu/cobbler/repo_mirror/prod-cfengine --cost=1000
repo --name="prod-epel"  --baseurl=http://inara.cs.umbc.edu/cobbler/repo_mirror/prod-epel --cost=1000
repo --name="prod-google-chrome"  --baseurl=http://inara.cs.umbc.edu/cobbler/repo_mirror/prod-google-chrome --cost=1000
repo --name="prod-libreoffice"  --baseurl=http://inara.cs.umbc.edu/cobbler/repo_mirror/prod-libreoffice --cost=1000
repo --name="prod-local"  --baseurl=http://inara.cs.umbc.edu/cobbler/repo_mirror/prod-local --cost=1000
repo --name="prod-openvz"  --baseurl=http://inara.cs.umbc.edu/cobbler/repo_mirror/prod-openvz --cost=1000
repo --name="prod-openvz-kernel"  --baseurl=http://inara.cs.umbc.edu/cobbler/repo_mirror/prod-openvz-kernel --cost=1000
repo --name="prod-rhel-x86_64-rhev-agent-6-workstation"  --baseurl=http://inara.cs.umbc.edu/cobbler/repo_mirror/prod-rhel-x86_64-rhev-agent-6-workstation --cost=1000
repo --name="prod-rhel-x86_64-workstation-6"  --baseurl=http://inara.cs.umbc.edu/cobbler/repo_mirror/prod-rhel-x86_64-workstation-6 --cost=1000
repo --name="prod-rhel-x86_64-workstation-6-rhscl-1"  --baseurl=http://inara.cs.umbc.edu/cobbler/repo_mirror/prod-rhel-x86_64-workstation-6-rhscl-1 --cost=1000
repo --name="prod-rhel-x86_64-workstation-dts-6"  --baseurl=http://inara.cs.umbc.edu/cobbler/repo_mirror/prod-rhel-x86_64-workstation-dts-6 --cost=1000
repo --name="prod-rhel-x86_64-workstation-dts2-6"  --baseurl=http://inara.cs.umbc.edu/cobbler/repo_mirror/prod-rhel-x86_64-workstation-dts2-6 --cost=1000
repo --name="prod-rhel-x86_64-workstation-fastrack-6"  --baseurl=http://inara.cs.umbc.edu/cobbler/repo_mirror/prod-rhel-x86_64-workstation-fastrack-6 --cost=1000
repo --name="prod-rhel-x86_64-workstation-optional-6"  --baseurl=http://inara.cs.umbc.edu/cobbler/repo_mirror/prod-rhel-x86_64-workstation-optional-6 --cost=1000
repo --name="prod-rhel-x86_64-workstation-optional-fastrack-6"  --baseurl=http://inara.cs.umbc.edu/cobbler/repo_mirror/prod-rhel-x86_64-workstation-optional-fastrack-6 --cost=1000
repo --name="prod-rhel-x86_64-workstation-rh-common-6"  --baseurl=http://inara.cs.umbc.edu/cobbler/repo_mirror/prod-rhel-x86_64-workstation-rh-common-6 --cost=1000
repo --name="prod-rhel-x86_64-workstation-supplementary-6"  --baseurl=http://inara.cs.umbc.edu/cobbler/repo_mirror/prod-rhel-x86_64-workstation-supplementary-6 --cost=1000
repo --name="prod-rhn-tools-rhel-x86_64-workstation-6"  --baseurl=http://inara.cs.umbc.edu/cobbler/repo_mirror/prod-rhn-tools-rhel-x86_64-workstation-6 --cost=1000
repo --name="prod-rpmfusion_free"  --baseurl=http://inara.cs.umbc.edu/cobbler/repo_mirror/prod-rpmfusion_free --cost=1000
repo --name="prod-rpmfusion_nonfree"  --baseurl=http://inara.cs.umbc.edu/cobbler/repo_mirror/prod-rpmfusion_nonfree --cost=1000
repo --name="prod-virtualbox"  --baseurl=http://inara.cs.umbc.edu/cobbler/repo_mirror/prod-virtualbox --cost=1000

%packages
@Additional Development
@Base
@CIFS file server
@CSEE Local
@Cfengine
@Compatibility libraries
@Console internet tools
@Core
@Desktop
@Desktop Debugging and Performance Tools
@Desktop Platform
@Desktop Platform Development
@Development tools
@Dial-up Networking Support
@Directory Client
@Directory Server
@E-mail server
@Eclipse
@FCoE Storage Client
@FTP server
@Fonts
@General Purpose Desktop
@Graphical Administration Tools
@Hardware monitoring utilities
@Infiniband Support
@Input Methods
@Internet Applications
@Internet Browser
@KDE Desktop
@Large Systems Performance
@Legacy X Window System compatibility
@Lowest Common Denominator
@Mainframe Access
@NFS file server
@Network Infrastructure Server
@Network Storage Server
@Network file system client
@Networking Tools
@Office Suite and Productivity
@PHP Support
@Performance Tools
@Printing client
@Remote Desktop Clients
@Scientific support
@Security Tools
@Server Platform
@Server Platform Development
@Smart card support
@Storage Availability Tools
@TeX support
@Technical Writing
@TurboGears application framework
@Web Server
@Web Servlet Engine
@X Window System
@iSCSI Storage Client

%end

%pre
curl http://mrepo.cs.umbc.edu/sda-pt.sf | sfdisk /dev/sda
%end

%post

/usr/sbin/ntpdate -u -v 130.85.1.3
/usr/sbin/ntpdate -u -v 130.85.1.4
/usr/sbin/ntpdate -u -v 130.85.1.5

/var/cfengine/bin/cf-agent -Bs 130.85.36.97
/var/cfengine/bin/cf-agent -Kv
/var/cfengine/bin/cf-agent -Kv
/var/cfengine/bin/cf-agent -Kv

wget http://mrepo.cs.umbc.edu/deploy.py -O /usr/csee/sbin/deploy.py
chmod +x /usr/csee/sbin/deploy.py
sed -i 's/5/3/g' /etc/inittab
echo "/usr/csee/sbin/deploy.py" >> /root/.bashrc

%end
